<template>
  <div class="page" data-name="home">
    <div class="navbar">
      <div class="navbar-bg"></div>
      <div class="navbar-inner sliding">
        <div class="right">
          <a href="#" class="link icon-only panel-open" data-panel="right">
            <i class="icon f7-icons">menu</i>
          </a>
        </div>
        <div class="title">Knight Mobile App</div>
      </div>
    </div>
    <div class="page-content">
      ${listePersonnages.map(personnage => $h`
      <div class="card">
        <div class="card-content card-content-padding">
          <div class="row display-flex align-items-center text-align-center">
            <div class="col-25">
            </div>
            <div class="col-50">
              <p>
                ${personnage.nom}
              </p>
            </div>
            <div class="col-25">
              <a href="/stats/" class="personnageRedirection" data-personnage-id="${personnage.id}">
                <i class="icon f7-icons ">play_fill</i>
              </a>
            </div>
          </div>
        </div>
      </div>
      `)}
      <div class="home-plus-btn color-white">
        <a href="/personnage-creation/">
          <i class="icon f7-icons">plus</i>
        </a>
      </div>
    </div>
  </div>
</template>

<script>
  export default (props, { $f7, $on }) => {
    const personnages = JSON.parse(localStorage.getItem('personnages'));
    const listePersonnages = [];
    Object.keys(personnages).forEach(key => {
      if (key!=="empty") {
        personnages[key]['id']=key;
        listePersonnages.push(personnages[key]);
      }
    });
    // component function must return render function
    return $render;
  }
</script>
